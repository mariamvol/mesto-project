(()=>{"use strict";var e={};function t(e,t){const n=document.querySelector("#card-template").content.querySelector(".card").cloneNode(!0),r=n.querySelector(".card__image"),o=n.querySelector(".card__title"),c=n.querySelector(".card__delete-button"),p=n.querySelector(".card__like-button");return o.textContent=e.name,r.src=e.link,r.alt=e.name,c.addEventListener("click",(e=>{e.target.closest(".card").remove()})),p.addEventListener("click",(()=>{p.classList.toggle("card__like-button_is-active")})),r.addEventListener("click",(()=>{t(e.name,e.link)})),n}function n(e){e.classList.add("popup_is-opened"),document.addEventListener("keydown",o)}function r(e){e.classList.remove("popup_is-opened"),document.removeEventListener("keydown",o)}function o(e){if("Escape"===e.key){const e=document.querySelector(".popup_is-opened");e&&r(e)}}function c(e,t){const n=e.some((e=>!e.validity.valid));t.disabled=n}function p(e){const t=Array.from(e.querySelectorAll(".popup__input")),n=e.querySelector(".popup__button");t.forEach((t=>{t.dataset.touched="false",t.setCustomValidity(""),t.classList.remove("popup__input_type_error");const n=e.querySelector(`.${t.name}-input-error`);n&&(n.textContent="")})),c(t,n)}e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var n=e.g.document;if(!t&&n&&(n.currentScript&&"SCRIPT"===n.currentScript.tagName.toUpperCase()&&(t=n.currentScript.src),!t)){var r=n.getElementsByTagName("script");if(r.length)for(var o=r.length-1;o>-1&&(!t||!/^http(s?):/.test(t));)t=r[o--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t})();const a=e.p+"images/logo.svg",l=e.p+"images/avatar.jpg";document.querySelector(".header__logo").src=a,document.querySelector(".profile__image").style.backgroundImage=`url(${l})`;const u=document.querySelector(".popup_type_edit"),i=(document.querySelector(".popup_type_new-card"),document.querySelector(".popup_type_image")),s=i.querySelector(".popup__image"),d=i.querySelector(".popup__caption"),m=document.querySelector(".profile__edit-button"),y=u.querySelector(".popup__close");m.addEventListener("click",(function(){f.value=_.textContent,g.value=v.textContent,p(u.querySelector(".popup__form")),n(u)})),y.addEventListener("click",(()=>r(u)));const _=document.querySelector(".profile__title"),v=document.querySelector(".profile__description"),f=u.querySelector('[name="name"]'),g=u.querySelector('[name="description"]');u.querySelector(".popup__form").addEventListener("submit",(function(e){e.preventDefault(),_.textContent=f.value,v.textContent=g.value,r(u)}));const S=document.querySelector(".places__list"),h=document.querySelector(".profile__add-button"),q=document.querySelector(".popup_type_new-card"),k=q.querySelector(".popup__form"),E=k.querySelector('[name="place-name"]'),b=k.querySelector('[name="link"]'),L=q.querySelector(".popup__close");function x(e,t){s.src=t,s.alt=e,d.textContent=e,n(i)}h.addEventListener("click",(()=>{E.value="",b.value="",p(k),n(q)})),L.addEventListener("click",(()=>r(q))),k.addEventListener("submit",(function(e){e.preventDefault();const n=t({name:E.value,link:b.value},x);S.prepend(n),r(q)})),i.querySelector(".popup__close").addEventListener("click",(()=>r(i))),document.querySelectorAll(".popup").forEach((e=>e.classList.add("popup_is-animated"))),[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].forEach((e=>{const n=t(e,x);S.append(n)})),document.querySelectorAll(".popup").forEach((e=>{e.addEventListener("mousedown",(t=>{t.target===e&&r(e)}))})),Array.from(document.querySelectorAll(".popup__form")).forEach((e=>{!function(e){const t=Array.from(e.querySelectorAll(".popup__input")),n=e.querySelector(".popup__button");c(t,n),t.forEach((r=>{r.addEventListener("input",(()=>{r.dataset.touched="true",function(e,t){let n="";const r=t.value.trim();t.validity.valueMissing?n="Вы пропустили это поле.":"url"===t.type&&t.validity.typeMismatch?n="Введите адрес сайта.":"name"===t.name&&r.length<2?n=`Минимальное количество символов: 2. Длина текста сейчас: ${r.length} символ${1===r.length?"":"а"}.`:"name"===t.name&&r.length>40?n="Максимальная длина — 40 символов.":"description"===t.name&&r.length<2?n=`Минимальное количество символов: 2. Длина текста сейчас: ${r.length} символ${1===r.length?"":"а"}.`:"description"===t.name&&r.length>200?n="Максимальная длина — 200 символов.":"place-name"===t.name&&r.length<2?n=`Минимальное количество символов: 2. Длина текста сейчас: ${r.length} символ${1===r.length?"":"а"}.`:"place-name"===t.name&&r.length>30&&(n="Максимальная длина — 30 символов."),t.setCustomValidity(n),t.validity.valid?function(e,t){const n=e.querySelector(`.${t.name}-input-error`);t.classList.remove("popup__input_type_error"),n.textContent=""}(e,t):function(e,t,n){const r=e.querySelector(`.${t.name}-input-error`);t.classList.add("popup__input_type_error"),r.textContent=n}(e,t,t.validationMessage)}(e,r),c(t,n)}))}))}(e)}))})();